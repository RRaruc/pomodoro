# Pomodoro — Fullstack приложение (FastAPI + PostgreSQL + Prometheus + Frontend)

Учебный fullstack-проект для управления Pomodoro-сессиями, задачами и аналитикой.
Архитектура включает:

- Backend: FastAPI  
- База данных: PostgreSQL  
- Frontend: статический интерфейс (HTML + JS)  
- Мониторинг: Prometheus  
- Контейнеризация: Docker Compose  

Проект полностью кроссплатформенный и запускается одинаково на Windows, macOS и Linux.

------------------------------------------------------------
ОБЩАЯ АРХИТЕКТУРА
------------------------------------------------------------

Пользователь работает через веб-интерфейс.
Frontend отправляет запросы в Backend.
Backend хранит данные в PostgreSQL.
Prometheus собирает метрики приложения.

Сервисы:
- frontend → http://localhost:5173
- backend  → http://localhost:8000
- postgres → порт 5432
- prometheus → http://localhost:9090

------------------------------------------------------------
ТРЕБОВАНИЯ
------------------------------------------------------------

Единственное требование для запуска — установленный Docker:

Windows / macOS:
- Docker Desktop

Linux:
- Docker Engine + Docker Compose plugin

------------------------------------------------------------
ЗАПУСК В ОДИН ШАГ
------------------------------------------------------------

После клонирования репозитория выполните:

macOS / Linux:

    ./scripts/run.sh

Windows (PowerShell):

    powershell -ExecutionPolicy Bypass -File .\scripts\run.ps1

После запуска будут доступны:

Frontend:
    http://localhost:5173

Backend health:
    http://localhost:8000/health

Prometheus:
    http://localhost:9090

------------------------------------------------------------
ОСТАНОВКА ПРОЕКТА
------------------------------------------------------------

macOS / Linux:

    ./scripts/stop.sh

Windows:

    docker compose down

------------------------------------------------------------
ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ
------------------------------------------------------------

При первом запуске автоматически создаётся файл .env из .env.example.

Вы можете изменить:

JWT_SECRET
DATABASE_URL
FRONTEND_ORIGIN

После изменения выполните:

    docker compose up -d --build

------------------------------------------------------------
ФУНКЦИОНАЛ ПРИЛОЖЕНИЯ
------------------------------------------------------------

1. Работа с Pomodoro-сессиями
   - Work / Short break / Long break
   - Автоматический переход между режимами
   - Поддержка гостевого пользователя
   - Персональные настройки длительности

2. Задачи
   - Добавление
   - Инкремент / декремент pomodoro-счётчика
   - Связка с авторизацией

3. Аналитика
   - Streak
   - Общее время фокусировки за сегодня
   - История последних действий

4. Гостевой режим
   - Пользователь может работать без регистрации
   - Гость создаётся автоматически при первом запуске таймера

------------------------------------------------------------
МОНИТОРИНГ (PROMETHEUS)
------------------------------------------------------------

Backend экспортирует метрики по адресу:

    http://localhost:8000/metrics

Prometheus собирает их автоматически.

Чтобы посмотреть метрики:

1. Откройте:
       http://localhost:9090

2. Введите запрос, например:

       http_requests_total

или

       rate(http_requests_total[1m])

Prometheus позволяет:
- анализировать нагрузку
- отслеживать количество запросов
- измерять latency
- строить графики
- настраивать алерты

